(function(t){function e(e){for(var a,s,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},n={app:0},o=[];function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},"13c9":function(t,e,r){t.exports=r.p+"img/cobb-salad.187a42ac.png"},"2bdf":function(t,e,r){t.exports=r.p+"img/croque-madame.a30642d3.png"},"33db":function(t,e,r){var a={"./all-dips.png":"d4ff","./burger.png":"6be0","./cobb-salad.png":"13c9","./croque-madame.png":"2bdf","./hotdog.png":"7b84","./mafalda.png":"a0da","./pizza.png":"f48a","./placeholder.png":"e619","./premium-burger.png":"b51a","./sushi.png":"67a5"};function n(t){var e=o(t);return r(e)}function o(t){if(!r.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=o,t.exports=n,n.id="33db"},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("b0c0");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container-fluid",attrs:{id:"app"}},[r("Topbar",{attrs:{profile:t.profile}}),r("router-view",{attrs:{profile:t.profile}})],1)},o=[],s=r("5530"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-navbar",{attrs:{sticky:"",toggleable:"lg",type:"light",variant:"light"}},[r("b-navbar-brand",{attrs:{to:"/"}},[t._v("EasyFood")]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-nav-item",{attrs:{to:"/"}},[t._v("Home")]),t.profile?r("b-nav-item",{attrs:{to:"/cart"}},[t._v("My cart "),r("b-badge",{directives:[{name:"show",rawName:"v-show",value:t.cartCount,expression:"cartCount"}]},[t._v(t._s(t.cartCount))])],1):t._e(),t.profile?r("b-nav-item",{attrs:{to:"/order/list"}},[t._v("My orders")]):t._e(),t.profile?r("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[r("em",[t._v(t._s(t.profile.name))])]},proxy:!0}],null,!1,3398348959)},["ADMIN"===t.profile.role?r("b-dropdown-item",{attrs:{to:"/admin"}},[t._v("Settings")]):t._e(),r("b-dropdown-item",{on:{click:t.closeSession}},[t._v("Sign Out")])],1):r("b-nav-item",{attrs:{to:"/login"}},[t._v("Sign in")])],1)],1)],1)},c=[],u=r("2f62"),l={computed:Object(s["a"])(Object(s["a"])({},Object(u["b"])("auth",{profile:"getProfile"})),Object(u["b"])("cart",{cartCount:"getCartCount"})),methods:{closeSession:function(){this.$store.commit("auth/LOGOUT"),"home"!==this.$router.history.current.name&&this.$router.push("/")}}},d=l,p=r("2877"),m=Object(p["a"])(d,i,c,!1,null,null,null),b=m.exports,f={name:"App",components:{Topbar:b},data:function(){return{profile:null}},computed:Object(s["a"])({},Object(u["b"])("auth",["getProfile"])),created:function(){this.profile=this.getProfile}},g=f,h=(r("034f"),Object(p["a"])(g,n,o,!1,null,null,null)),v=h.exports,w=r("1da1"),_=r("2909"),O=(r("96cf"),r("7db0"),r("d3b7"),r("4de4"),r("99af"),r("4e82"),r("d81d"),r("bc3a")),x=r.n(O),y={namespaced:!0,state:{cart:{products:[]},orders:[]},mutations:{LOAD_CART:function(t,e){t.cart=e},ADD_TO_CART:function(t,e){var r=t.cart.products.find((function(t){return t.id===e.id}));if(r){r.quantity++;var a=t.cart.products.filter((function(t){return t.id!==e.id}));t.cart.products=[].concat(Object(_["a"])(a),[r])}else e.quantity=1,t.cart.products.push(e)},SUB_FROM_CART:function(t,e){var r=t.cart.products.find((function(t){return t.id===e.id}));if(r){r.quantity--;var a=t.cart.products.filter((function(t){return t.id!==e.id}));0===r.quantity?t.cart.products=Object(_["a"])(a):t.cart.products=[].concat(Object(_["a"])(a),[r])}},SET_ORDERS:function(t,e){t.orders=e},RESET_CART:function(t){var e=Object(s["a"])({},t.cart);e.products=[],t.cart=e}},actions:{obtainUserCart:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,x.a.get("/cart?userEmail="+e);case 2:a=r.sent,200===a.status&&a.data.length>0?t.commit("LOAD_CART",a.data[0]):t.commit("LOAD_CART",{products:[]});case 4:case"end":return r.stop()}}),r)})))()},addToCart:function(t,e){t.commit("ADD_TO_CART",e)},subFromCart:function(t,e){t.commit("SUB_FROM_CART",e)},syncUserCart:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,x.a.get("/cart?userEmail="+e.email);case 2:if(a=r.sent,n=null,!(200===a.status&&a.data.length>0)){r.next=10;break}return r.next=7,x.a.put("/cart/"+e.cart.id,e.cart);case 7:n=r.sent,r.next=14;break;case 10:return r.next=12,x.a.post("/cart",e.cart);case 12:n=r.sent,t.commit("LOAD_CART",n.data);case 14:case"end":return r.stop()}}),r)})))()},emptyUserCart:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("/cart?userEmail="+e.email);case 2:if(r=t.sent,1!==r.data.length){t.next=8;break}return a=Object(s["a"])({},r.data[0]),a.products=[],t.next=8,x.a.put("/cart/"+a.id,a);case 8:case"end":return t.stop()}}),t)})))()},placeOrder:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=null,r.next=3,x.a.post("/orders",e);case 3:a=r.sent,a.status>=200&&a.status<400&&(t.dispatch("obtainOrders"),t.commit("RESET_CART"),t.dispatch("emptyUserCart",e));case 5:case"end":return r.stop()}}),r)})))()},obtainOrders:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,x.a.get("/orders?userId="+e);case 2:a=r.sent,200===a.status&&a.data.length>0&&t.commit("SET_ORDERS",a.data);case 4:case"end":return r.stop()}}),r)})))()}},getters:{getCart:function(t){var e=Object(s["a"])({},t.cart);return e.products=t.cart.products.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})),e},getCartCount:function(t){var e=0;return t.cart&&t.cart.products&&t.cart.products.length>0&&t.cart.products.map((function(t){return e+=t.quantity})),e},getCartTotal:function(t){var e=0;return t.cart&&t.cart.products&&t.cart.products.length>0&&t.cart.products.map((function(t){return e+=t.quantity*t.price})),e},getOrders:function(t){return t.orders}}},C=r("8c4f"),R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-row",[r("b-col",{attrs:{cols:"3",md:"4"}}),r("b-col",{attrs:{cols:"6",md:"4"}},[r("Login")],1),r("b-col",{attrs:{cols:"3",md:"4"}})],1)],1)},k=[],j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.showLogin?r("b-form",{on:{submit:function(e){return e.preventDefault(),t.onLogin.apply(null,arguments)}}},[r("b-form-group",{attrs:{id:"input-group-1",label:"Email","label-for":"email"}},[r("b-form-input",{attrs:{id:"email",type:"email",placeholder:"Enter email",required:""},model:{value:t.login.email,callback:function(e){t.$set(t.login,"email",e)},expression:"login.email"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"Password","label-for":"password"}},[r("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:t.login.password,callback:function(e){t.$set(t.login,"password",e)},expression:"login.password"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.isLoginIn}},[r("b-spinner",{directives:[{name:"show",rawName:"v-show",value:t.isLoginIn,expression:"isLoginIn"}],attrs:{small:""}}),t._v("Login ")],1),r("b-button",{attrs:{type:"button",variant:"info",disabled:t.isLoginIn},on:{click:function(e){return e.preventDefault(),t.onShowRegister.apply(null,arguments)}}},[t._v("Register")])],1):r("b-form",{on:{submit:function(e){return e.preventDefault(),t.onRegister.apply(null,arguments)}}},[r("b-form-group",{attrs:{id:"rinput-group-1",label:"Name","label-for":"rname"}},[r("b-form-input",{attrs:{id:"name",type:"text",placeholder:"Enter name",required:""},model:{value:t.register.name,callback:function(e){t.$set(t.register,"name",e)},expression:"register.name"}})],1),r("b-form-group",{attrs:{id:"rinput-group-2",label:"Email","label-for":"remail"}},[r("b-form-input",{attrs:{id:"remail",type:"email",placeholder:"Enter email",required:""},model:{value:t.register.email,callback:function(e){t.$set(t.register,"email",e)},expression:"register.email"}})],1),r("b-form-group",{attrs:{id:"rinput-group-3",label:"Password","label-for":"rpassword"}},[r("b-form-input",{attrs:{id:"rpassword",type:"password",required:""},model:{value:t.register.password,callback:function(e){t.$set(t.register,"password",e)},expression:"register.password"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.isRegisterIn}},[r("b-spinner",{directives:[{name:"show",rawName:"v-show",value:t.isRegisterIn,expression:"isRegisterIn"}],attrs:{small:""}}),t._v("Register ")],1),r("b-button",{attrs:{type:"button",variant:"info",disabled:t.isRegisterIn},on:{click:function(e){return e.preventDefault(),t.onShowLogin.apply(null,arguments)}}},[t._v("Go to Login")])],1)],1)},P=[],T={data:function(){return{login:{email:"",password:""},register:{name:"",email:"",password:""},isLoginIn:!1,isRegisterIn:!1}},computed:Object(s["a"])({},Object(u["b"])("auth",{loginMsg:"getLoginResult",registrationMsg:"getRegistrationResult",showLogin:"isShowLogin"})),methods:{onLogin:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.login.email){e.next=4;break}alert("Email is required"),e.next=13;break;case 4:if(""!=t.login.password){e.next=8;break}alert("Password is required"),e.next=13;break;case 8:return t.isLoginIn=!0,e.next=11,t.$store.dispatch("auth/login",t.login);case 11:null!==t.loginMsg&&(alert(t.loginMsg),t.$store.commit("auth/SET_LOGIN_RESULT",null)),t.isLoginIn=!1;case 13:case"end":return e.stop()}}),e)})))()},onRegister:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.register.name){e.next=4;break}alert("Name is required"),e.next=17;break;case 4:if(""!=t.register.email){e.next=8;break}alert("Email is required"),e.next=17;break;case 8:if(""!=t.register.password){e.next=12;break}alert("Password is required"),e.next=17;break;case 12:return t.isRegisterIn=!0,e.next=15,t.$store.dispatch("auth/register",t.register);case 15:null!==t.registrationMsg&&(alert(t.registrationMsg),t.$store.commit("auth/SET_REGISTRATION_RESULT",null)),t.isRegisterIn=!1;case 17:case"end":return e.stop()}}),e)})))()},onShowRegister:function(){this.$store.commit("auth/TOGGLE_LOGIN"),this.clearForms()},onShowLogin:function(){this.$store.commit("auth/TOGGLE_LOGIN"),this.clearForms()},clearForms:function(){this.login={email:"",password:""},this.register={name:"",email:"",password:""}}}},E=T,S=Object(p["a"])(E,j,P,!1,null,null,null),$=S.exports,I={name:"AuthView",components:{Login:$}},L=I,A=Object(p["a"])(L,R,k,!1,null,null,null),N=A.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-row",[r("b-col"),r("b-col",{attrs:{cols:"10"}},[r("Catalog")],1),r("b-col")],1)],1)},F=[],D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("h3",[t._v("Products")]),r("b-row",t._l(t.products,(function(t,e){return r("b-col",{key:e},[r("CatalogItem",{attrs:{product:t}})],1)})),1)],1)},M=[],q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{staticClass:"mb-2",staticStyle:{"min-width":"20rem","min-height":"25rem","max-width":"24rem"},attrs:{title:t.product.name,"img-src":t.imgUrl,"img-alt":t.product.name,"img-top":"",tag:"article"}},[r("b-card-text",[t._v(" Price: $"+t._s(t.product.price)+" ")]),r("b-button",{attrs:{size:"sm",href:"#",variant:"info"},on:{click:function(e){return t.$bvModal.show("modal-"+t.product.id)}}},[t._v("More info")]),r("b-button",{directives:[{name:"show",rawName:"v-show",value:t.profile,expression:"profile"}],staticClass:"ml-2",attrs:{size:"sm",variant:"primary"},on:{click:t.onAddOneToCart}},[t._v("Add 1 to cart")]),r("b-modal",{attrs:{id:"modal-"+t.product.id,title:t.product.name,"ok-only":"","button-size":"sm"}},[r("CatalogItemDetail",{attrs:{product:t.product}})],1)],1)},G=[],z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{staticClass:"mb-2",staticStyle:{"min-width":"15rem","min-height":"25rem"},attrs:{title:t.product.name,"img-src":t.imgUrl,"img-alt":t.product.name,"img-top":"",tag:"article"}},[r("b-card-text",[t._v(" Price: $"+t._s(t.product.price)+" "),r("br"),r("ul",[r("li",[r("b",[t._v("Calories:")]),t._v(" "+t._s(t.product.detail.calories))]),r("li",[r("b",[t._v("Ingredients:")]),t._v(" "+t._s(t.product.detail.ingredients.join(", ")))])])]),r("b-button",{directives:[{name:"show",rawName:"v-show",value:t.profile,expression:"profile"}],attrs:{size:"sm",href:"#",variant:"primary"},on:{click:t.onAddOneToCart}},[t._v("Add 1 to cart")]),r("b-alert",{attrs:{variant:"success",show:t.dismissCountDown,dismissible:""},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v("1 unit added to the Cart")])],1)},K=[],B={props:{product:{type:Object,default:null}},data:function(){return{dismissSecs:3,dismissCountDown:0}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(u["b"])("auth",{profile:"getProfile"})),Object(u["b"])("cart",{cart:"getCart"})),{},{imgUrl:function(){return r("33db")("./"+this.product.img)}}),methods:{onAddOneToCart:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("cart/addToCart",t.product);case 2:return e.next=4,t.$store.dispatch("cart/syncUserCart",{email:t.profile.email,cart:t.cart});case 4:t.showAlert();case 5:case"end":return e.stop()}}),e)})))()},countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs}}},V=B,H=Object(p["a"])(V,z,K,!1,null,null,null),J=H.exports,Y={components:{CatalogItemDetail:J},props:{product:{type:Object,default:null}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(u["b"])("auth",{profile:"getProfile"})),Object(u["b"])("cart",{cart:"getCart"})),{},{imgUrl:function(){return r("33db")("./"+this.product.img)}}),methods:{onAddOneToCart:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("cart/addToCart",t.product);case 2:return e.next=4,t.$store.dispatch("cart/syncUserCart",{email:t.profile.email,cart:t.cart});case 4:t.showAlert();case 5:case"end":return e.stop()}}),e)})))()}}},Q=Y,X=Object(p["a"])(Q,q,G,!1,null,null,null),W=X.exports,Z={props:{},components:{CatalogItem:W},computed:Object(s["a"])({},Object(u["b"])("adminProducts",{products:"getProducts"})),beforeMount:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("adminProducts/obtainProducts");case 2:case"end":return e.stop()}}),e)})))()}},tt=Z,et=Object(p["a"])(tt,D,M,!1,null,null,null),rt=et.exports,at={name:"HomeView",components:{Catalog:rt}},nt=at,ot=Object(p["a"])(nt,U,F,!1,null,null,null),st=ot.exports,it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-row",[r("b-col"),r("b-col",{attrs:{cols:"10"}},[r("Cart")],1),r("b-col")],1)],1)},ct=[],ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("h3",[t._v("Products in cart")]),r("b-row",{directives:[{name:"show",rawName:"v-show",value:t.cartProducts.products.length>0,expression:"cartProducts.products.length > 0"}]},[r("b-col",{attrs:{cols:"4"}},[r("b",[t._v("Product")])]),r("b-col",{attrs:{cols:"2"}},[r("b",[t._v("Quantity")])]),r("b-col",{attrs:{cols:"3"}},[r("b",[t._v("Unit price")])]),r("b-col",{attrs:{cols:"3"}},[r("b",[t._v("Sub total")])])],1),t._l(t.cartProducts.products,(function(e,a){return r("cart-item",{key:a,attrs:{product:e},on:{"add-to-cart":t.onAddOneToCart,"sub-from-cart":t.onSubOneFromCart}})})),r("b-row",{directives:[{name:"show",rawName:"v-show",value:t.cartProducts.products.length>0,expression:"cartProducts.products.length > 0"}]},[r("b-col",{staticClass:"ml-auto",attrs:{cols:"9"}},[r("b",[t._v("Order total")])]),r("b-col",{attrs:{cols:"3"}},[r("b",[t._v("$"+t._s(t.cartTotal.toFixed(2)))])])],1),r("b-row",{directives:[{name:"show",rawName:"v-show",value:t.cartProducts.products.length>0,expression:"cartProducts.products.length > 0"}],staticClass:"mt-2"},[r("b-col",{staticClass:"mr-auto",attrs:{cols:"12"}},[r("b-button",{attrs:{size:"sm",variant:"primary",to:"/order/close"}},[t._v("Place order")])],1)],1),r("b-row",{directives:[{name:"show",rawName:"v-show",value:!t.cartProducts.products.length>0,expression:"!cartProducts.products.length > 0"}]},[r("b-col",{attrs:{cols:"12"}},[r("b",[t._v("Cart is empty")])])],1)],2)},lt=[],dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-row",{staticClass:"mb-1"},[r("b-col",{attrs:{cols:"4"}},[t._v(t._s(t.product.name))]),r("b-col",{attrs:{cols:"3"}},[r("b-button",{attrs:{size:"sm",variant:"warning",disabled:!t.btnEnabled},on:{click:t.subOneFromCart}},[t._v("-")]),t._v(" "+t._s(t.product.quantity)+" "),r("b-button",{attrs:{size:"sm",variant:"info",disabled:!t.btnEnabled},on:{click:t.addOneToCart}},[t._v("+")])],1),r("b-col",{attrs:{cols:"2"}},[t._v(t._s(t.product.price))]),r("b-col",{attrs:{cols:"2"}},[t._v(t._s(parseFloat(t.product.price*t.product.quantity).toFixed(2)))])],1)},pt=[],mt={props:{product:{type:Object,default:null},addToCart:{type:Function},subFromCart:{type:Function}},data:function(){return{btnEnabled:!0}},computed:Object(s["a"])({},Object(u["b"])("auth",{profile:"getProfile"})),methods:{addOneToCart:function(){this.btnEnabled=!1,this.$emit("add-to-cart",this.product),this.delayBtnUsage()},subOneFromCart:function(){this.btnEnabled=!1,this.$emit("sub-from-cart",this.product),this.delayBtnUsage()},delayBtnUsage:function(){var t=this,e=setTimeout((function(){t.btnEnabled=!0,clearTimeout(e)}),1e3)}}},bt=mt,ft=Object(p["a"])(bt,dt,pt,!1,null,null,null),gt=ft.exports,ht={components:{CartItem:gt},computed:Object(s["a"])(Object(s["a"])({},Object(u["b"])("cart",{cartProducts:"getCart",cartTotal:"getCartTotal"})),Object(u["b"])("auth",{profile:"getProfile"})),methods:{onAddOneToCart:function(t){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$store.dispatch("cart/addToCart",t);case 2:return r.next=4,e.$store.dispatch("cart/syncUserCart",{email:e.profile.email,cart:e.cartProducts});case 4:case"end":return r.stop()}}),r)})))()},onSubOneFromCart:function(t){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$store.dispatch("cart/subFromCart",t);case 2:return r.next=4,e.$store.dispatch("cart/syncUserCart",{email:e.profile.email,cart:e.cartProducts});case 4:case"end":return r.stop()}}),r)})))()}}},vt=ht,wt=Object(p["a"])(vt,ut,lt,!1,null,null,null),_t=wt.exports,Ot={name:"CartView",components:{Cart:_t}},xt=Ot,yt=Object(p["a"])(xt,it,ct,!1,null,null,null),Ct=yt.exports,Rt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-row",[r("b-col"),r("b-col",{attrs:{cols:"10"}},[r("router-view")],1),r("b-col")],1)],1)},kt=[],jt={name:"OrdersView",components:{}},Pt=jt,Tt=Object(p["a"])(Pt,Rt,kt,!1,null,null,null),Et=Tt.exports,St=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("b-row",[r("b-col",{attrs:{cols:"3"}},[r("AdminSidebar")],1),r(t.adminType,{tag:"component"})],1)],1)},$t=[],It=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-nav",{attrs:{vertical:"",pills:""}},[r("b-nav-item",{attrs:{active:"products"==t.menuActive},on:{click:function(){return t.onMenuChange("products")}}},[t._v("Manage products")]),r("b-nav-item",{attrs:{active:"users"==t.menuActive},on:{click:function(){return t.onMenuChange("users")}}},[t._v("Manage users")])],1)},Lt=[],At=new a["default"],Nt=At,Ut={data:function(){return{menuActive:"products"}},methods:{onMenuChange:function(t){this.menuActive=t,Nt.$emit("admin-change-menu",{menu:t})}}},Ft=Ut,Dt=Object(p["a"])(Ft,It,Lt,!1,null,null,null),Mt=Dt.exports,qt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-col",{attrs:{cols:"9"}},[r("div",{staticStyle:{display:"flex"}},[r("h4",{staticStyle:{display:"inline"}},[t._v("Manage products")]),r("b-button",{staticClass:"ml-auto",attrs:{size:"sm",variant:"info"},on:{click:function(e){t.showForm=!0}}},[t._v("+")])],1),t.showForm?r("b-form",{on:{submit:function(e){return e.preventDefault(),t.saveProduct.apply(null,arguments)}}},[r("b-form-group",{attrs:{id:"g1",label:"Name","label-for":"name"}},[r("b-form-input",{attrs:{id:"name",type:"text"},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}}),r("b-form-invalid-feedback",{attrs:{state:t.validateName}},[t._v(" Name is required ")]),r("b-form-valid-feedback",{attrs:{state:t.validateName}},[t._v(" It's OK ")])],1),r("b-form-group",{attrs:{id:"g2",label:"Price","label-for":"price"}},[r("b-form-input",{attrs:{id:"price",type:"number",min:"0",step:".01"},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}}),r("b-form-invalid-feedback",{attrs:{state:t.validatePrice}},[t._v(" Price must be a positive number ")]),r("b-form-valid-feedback",{attrs:{state:t.validatePrice}},[t._v(" It's OK ")])],1),r("b-form-group",{attrs:{id:"g3",label:"Calories","label-for":"calories"}},[r("b-form-input",{attrs:{id:"calories",type:"number",min:"0",step:"1"},model:{value:t.product.detail.calories,callback:function(e){t.$set(t.product.detail,"calories",e)},expression:"product.detail.calories"}}),r("b-form-invalid-feedback",{attrs:{state:t.validateCalories}},[t._v(" Calories must be a positive number ")]),r("b-form-valid-feedback",{attrs:{state:t.validateCalories}},[t._v(" It's OK ")])],1),r("b-form-group",{attrs:{id:"g4",label:"Ingredients","label-for":"ingredients"}},[r("b-form-textarea",{attrs:{id:"ingredients",placeholder:"Enter comma separated values",rows:"3"},model:{value:t.product.detail.ingredients,callback:function(e){t.$set(t.product.detail,"ingredients",e)},expression:"product.detail.ingredients"}}),r("b-form-invalid-feedback",{attrs:{state:t.validateIngredients}},[t._v(" At least 1 ingredient is required ")]),r("b-form-valid-feedback",{attrs:{state:t.validateIngredients}},[t._v(" It's OK ")])],1),r("b-button",{attrs:{size:"sm",variant:"primary",type:"submit"}},[t._v(t._s(t.selectedProductId?"Update":"Create"))]),r("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(e){return t.cancelForm()}}},[t._v("Cancel")])],1):r("b-table-lite",{attrs:{fields:t.fields,items:t.products},scopedSlots:t._u([{key:"cell(detail)",fn:function(e){return[r("ul",t._l(e.item.detail,(function(e,a){return r("li",{key:a},[t._v(" "+t._s(a)+": "+t._s(e instanceof Array?e.join(", "):e)+" ")])})),0)]}},{key:"cell(img)",fn:function(e){return[r("b-img",{attrs:{src:t.imgUrl(e.item.img),width:"100"}})]}},{key:"cell(actions)",fn:function(e){return[e.item.id>9?r("b-button",{staticClass:"mr-1",attrs:{size:"sm",title:"Edit"},on:{click:function(r){return t.editProduct(e.item.id)}}},[r("b-icon-pencil")],1):t._e(),e.item.id>9?r("b-button",{attrs:{size:"sm",variant:"danger",title:"Remove"},on:{click:function(r){return t.removeProduct(e.item.id)}}},[r("b-icon-trash")],1):t._e()]}}],null,!1,2746105665)})],1)},Gt=[],zt=r("b85c"),Kt=(r("498a"),r("ac1f"),r("1276"),r("e9c4"),r("a15b"),{data:function(){return{fields:[{key:"id",label:"Id"},{key:"name",label:"Name"},{key:"img",label:"Picture"},{key:"price",label:"Price"},{key:"detail",label:"Details"},{key:"actions",label:"Options"}],showForm:!1,product:{name:"",img:"placeholder.png",price:0,detail:{calories:0,ingredients:""}},selectedProductId:null}},computed:Object(s["a"])(Object(s["a"])({},Object(u["b"])("adminProducts",{products:"getProducts"})),{},{validateForm:function(){return this.validateName&&this.validatePrice&&this.validateCalories&&this.validateIngredients},validateName:function(){return""!==this.product.name.trim()},validatePrice:function(){return!(isNaN(this.product.price)||isNaN(parseFloat(this.product.price))||parseFloat(this.product.price)<=0)},validateCalories:function(){return!(isNaN(this.product.detail.calories)||isNaN(parseInt(this.product.detail.calories))||parseInt(this.product.detail.calories)<=0)},validateIngredients:function(){var t=this.product.detail.ingredients instanceof Array?this.product.detail.ingredients:this.product.detail.ingredients.split(",");return!!(t&&t.length>0&&""!==t[0].trim())}}),methods:{imgUrl:function(t){return r("33db")("./"+t)},saveProduct:function(){if(this.validateForm){var t=this.product,e=t.detail.ingredients.split(",");t.detail.ingredients=[];var r,a=Object(zt["a"])(e);try{for(a.s();!(r=a.n()).done;){var n=r.value;t.detail.ingredients.push(n.trim())}}catch(o){a.e(o)}finally{a.f()}this.$store.dispatch("adminProducts/saveNewProduct",t),null!==this.selectedProductId?alert("Product updated!"):alert("Product created!"),this.cancelForm()}},clearForm:function(){this.product={name:"",img:"placeholder.png",price:0,detail:{calories:0,ingredients:""}}},editProduct:function(t){var e=JSON.parse(JSON.stringify(this.products.filter((function(e){return e.id===t}))));this.selectedProductId=t,e[0].detail.ingredients=e[0].detail.ingredients.join(", "),this.product=e[0],this.showForm=!0},cancelForm:function(){this.selectedProductId=null,this.showForm=!1,this.clearForm()},removeProduct:function(t){confirm("Are you sure to remove th product with ID "+t+"?")&&(this.$store.dispatch("adminProducts/removeProduct",t),alert("Product deleted!"))}}}),Bt=Kt,Vt=Object(p["a"])(Bt,qt,Gt,!1,null,null,null),Ht=Vt.exports,Jt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-col",{attrs:{cols:"9"}},[r("div",{staticStyle:{display:"flex"}},[r("h4",{staticStyle:{display:"inline"}},[t._v("Manage Users")])]),r("b-table-lite",{attrs:{fields:t.fields,items:t.users}})],1)},Yt=[],Qt={data:function(){return{fields:[{key:"id",label:"Id"},{key:"name",label:"Name"},{key:"email",label:"Email"},{key:"role",label:"Role"}]}},beforeMount:function(){this.$store.dispatch("adminUsers/obtainUsers")},computed:Object(s["a"])({},Object(u["b"])("adminUsers",{users:"getUsers"}))},Xt=Qt,Wt=Object(p["a"])(Xt,Jt,Yt,!1,null,null,null),Zt=Wt.exports,te={components:{AdminSidebar:Mt,AdminProducts:Ht,AdminUsers:Zt},created:function(){var t=this;Nt.$on("admin-change-menu",(function(e){t.adminType="products"===e.menu?Ht:Zt}))},data:function(){return{adminType:Ht}},beforeDestroy:function(){Nt.$off("admin-change-menu")}},ee=te,re=Object(p["a"])(ee,St,$t,!1,null,null,null),ae=re.exports,ne=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form",{on:{submit:function(e){return e.preventDefault(),t.onPlaceOrder.apply(null,arguments)}}},[r("h4",[t._v("Place your order")]),r("p",[r("b",[t._v("Quantity:")]),t._v(" "+t._s(t.cartCount)+" items")]),r("p",[r("b",[t._v("Order total:")]),t._v(" $ "+t._s(t.cartTotal))]),r("h5",[t._v("Please, state your delivery address and phone number")]),r("b-form-group",{attrs:{id:"input-group-1",label:"Address","label-for":"address"}},[r("b-form-input",{attrs:{id:"address",type:"text",placeholder:"ie: 765 Siempre Viva Av",required:""},model:{value:t.order.address,callback:function(e){t.$set(t.order,"address",e)},expression:"order.address"}}),r("b-form-invalid-feedback",{attrs:{state:t.validateAddress}},[t._v(" Please, check the address format ")]),r("b-form-valid-feedback",{attrs:{state:t.validateAddress}},[t._v(" It's OK ")])],1),r("b-form-group",{attrs:{id:"input-group-2",label:"Phone","label-for":"phone"}},[r("b-form-input",{attrs:{id:"phone",type:"tel",placeholder:"ie: +54 11 5432 9876",required:""},model:{value:t.order.phone,callback:function(e){t.$set(t.order,"phone",e)},expression:"order.phone"}}),r("b-form-invalid-feedback",{attrs:{state:t.validatePhone}},[t._v(" Please, check the phone format ")]),r("b-form-valid-feedback",{attrs:{state:t.validatePhone}},[t._v(" It's OK ")])],1),r("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.isProcessing}},[r("b-spinner",{directives:[{name:"show",rawName:"v-show",value:t.isProcessing,expression:"isProcessing"}],attrs:{small:""}}),t._v("Place order ")],1),r("b-button",{attrs:{type:"button",variant:"secondary",to:"/cart",disabled:t.isProcessing}},[t._v("Cancel")])],1)],1)},oe=[],se={computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(u["b"])("cart",{cart:"getCart",cartTotal:"getCartTotal",cartCount:"getCartCount"})),Object(u["b"])("auth",{profile:"getProfile"})),{},{validateAddress:function(){return""!==this.order.address.trim()},validatePhone:function(){return""!==this.order.phone.trim()},validateForm:function(){return this.validateAddress&&this.validatePhone}}),data:function(){return{order:{address:"",phone:""},isProcessing:!1}},methods:{onPlaceOrder:function(){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.dispatch("cart/emptyUserCart",{email:t.profile.email}),t.isProcessing=!0,!t.validateForm){e.next=12;break}return r=t.order,r.date=t.$dayjs().format("YYYY-MM-DD HH:mm:ss"),r.userId=t.profile.id,r.email=t.profile.email,r.items=t.cart.products,e.next=10,t.$store.dispatch("cart/placeOrder",r);case 10:alert("Order placed successfully"),t.$router.push("/order/list");case 12:t.isProcessing=!1;case 13:case"end":return e.stop()}}),e)})))()}}},ie=se,ce=Object(p["a"])(ie,ne,oe,!1,null,null,null),ue=ce.exports,le=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[r("h4",[t._v("My Orders")]),r("b-row",{directives:[{name:"show",rawName:"v-show",value:t.orders.length>0,expression:"orders.length > 0"}]},[r("b-col",{attrs:{cols:"2"}},[r("b",[t._v("Id")])]),r("b-col",{attrs:{cols:"4"}},[r("b",[t._v("Order date")])]),r("b-col",{attrs:{cols:"3"}},[r("b",[t._v("Items")])]),r("b-col",{attrs:{cols:"3"}},[r("b",[t._v("Total")])])],1),t._l(t.orders,(function(t,e){return r("order-item",{key:e,attrs:{order:t}})})),r("b-row",{directives:[{name:"show",rawName:"v-show",value:0===t.orders.length,expression:"orders.length === 0"}]},[r("b-col",{attrs:{cols:"12"}},[r("b",[t._v("No orders so far")])])],1)],2)},de=[],pe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-row",[r("b-col",{attrs:{cols:"2"}},[t._v(t._s(t.order.id))]),r("b-col",{attrs:{cols:"4"}},[t._v(t._s(t.order.date))]),r("b-col",{attrs:{cols:"3"}},[t._v(t._s(t.orderItemsCount))]),r("b-col",{attrs:{cols:"3"}},[t._v("$"+t._s(parseFloat(t.order.total).toFixed(2)))])],1),t._l(t.order.items,(function(e,a){return r("b-row",{key:a,staticClass:"bg-light"},[r("b-col",{attrs:{cols:"6"}}),r("b-col",{attrs:{cols:"3"}},[t._v(t._s(e.name))]),r("b-col",{attrs:{cols:"3"}},[t._v(t._s(e.quantity)+" x $"+t._s(parseFloat(e.price).toFixed(2))+" = $"+t._s(parseFloat(e.quantity*e.price).toFixed(2)))])],1)}))],2)},me=[],be={props:{order:{type:Object,default:null}},computed:{orderItemsCount:function(){var t=0;return this.order.items.map((function(e){t+=e.quantity})),t}}},fe=be,ge=Object(p["a"])(fe,pe,me,!1,null,null,null),he=ge.exports,ve={components:{OrderItem:he},beforeMount:function(){this.$store.dispatch("cart/obtainOrders",this.profile.id)},computed:Object(s["a"])(Object(s["a"])({},Object(u["b"])("cart",{orders:"getOrders"})),Object(u["b"])("auth",{profile:"getProfile"}))},we=ve,_e=Object(p["a"])(we,le,de,!1,null,null,null),Oe=_e.exports;a["default"].use(C["a"]);var xe=[{path:"/",name:"home",component:st,props:!0},{path:"/login",name:"auth",component:N,props:!0},{path:"/cart",name:"cart",component:Ct,props:!0},{path:"/order",component:Et,children:[{path:"close",component:ue},{path:"list",component:Oe}]},{path:"/order",name:"order",component:Et,props:!0},{path:"/admin",name:"admin",component:ae,props:!0}],ye=new C["a"]({routes:xe,base:"/",mode:"history"}),Ce=ye,Re=r("69f2"),ke={namespaced:!0,state:{profile:null,userRegistrationResult:null,userLoginResult:null,showLogin:!0},mutations:{LOGIN:function(t,e){t.profile=e,t.cart={userEmail:e.email,products:[]}},LOGOUT:function(t){t.profile=null,t.cart={products:[]}},SET_REGISTRATION_RESULT:function(t,e){t.userRegistrationResult=e},SET_LOGIN_RESULT:function(t,e){t.userLoginResult=e},TOGGLE_LOGIN:function(t){t.showLogin=!t.showLogin}},actions:{login:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,x.a.get("/users?email="+e.email);case 2:if(a=r.sent,200!==a.status||1!==a.data.length){r.next=16;break}if(n=a.data[0],n.password!==Re("sha512").update(e.password).digest("hex")){r.next=13;break}return delete n["password"],t.commit("LOGIN",n),r.next=10,t.dispatch("cart/obtainUserCart",e.email,{root:!0});case 10:Ce.push("/"),r.next=14;break;case 13:t.commit("SET_LOGIN_RESULT","User or password incorrect");case 14:r.next=17;break;case 16:t.commit("SET_LOGIN_RESULT","An error has occurred. Please, try again later");case 17:case"end":return r.stop()}}),r)})))()},register:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("REG CONTEXT",t),a={name:e.name,email:e.email,password:Re("sha512").update(e.password).digest("hex"),role:"USER"},r.next=4,x.a.post("/users",a);case 4:if(n=r.sent,!(n.status>=200)){r.next=11;break}return t.commit("SET_REGISTRATION_RESULT","Use registered successfully!"),r.next=9,t.dispatch("login",e);case 9:r.next=12;break;case 11:t.commit("SET_REGISTRATION_RESULT","An error has occurred. Please, try again later");case 12:case"end":return r.stop()}}),r)})))()}},getters:{getProfile:function(t){return t.profile},getLoginResult:function(t){return t.userLoginResult},getRegistrationResult:function(t){return t.userRegistrationResult},isShowLogin:function(t){return t.showLogin}}},je={namespaced:!0,state:{products:[]},mutations:{SET_PRODUCTS:function(t,e){t.products=e}},actions:{obtainProducts:function(t){return Object(w["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/products");case 2:r=e.sent,200===r.status&&r.data.length>0&&t.commit("SET_PRODUCTS",r.data);case 4:case"end":return e.stop()}}),e)})))()},saveNewProduct:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=null,void 0===e.id){r.next=7;break}return r.next=4,x.a.put("/products/"+e.id,e);case 4:a=r.sent,r.next=10;break;case 7:return r.next=9,x.a.post("/products",e);case 9:a=r.sent;case 10:a.status>=200&&a.status<400&&t.dispatch("obtainProducts");case 11:case"end":return r.stop()}}),r)})))()},removeProduct:function(t,e){return Object(w["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,x.a.delete("/products/"+e);case 2:a=r.sent,a.status>=200&&a.status<400&&t.dispatch("obtainProducts");case 4:case"end":return r.stop()}}),r)})))()}},getters:{getProducts:function(t){return t.products}}},Pe={namespaced:!0,state:{users:[]},mutations:{SET_USERS:function(t,e){t.users=e}},actions:{obtainUsers:function(t){return Object(w["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/users");case 2:r=e.sent,200===r.status&&r.data.length>0&&t.commit("SET_USERS",r.data);case 4:case"end":return e.stop()}}),e)})))()}},getters:{getUsers:function(t){return t.users}}};a["default"].use(u["a"]);var Te=new u["a"].Store({modules:{cart:y,auth:ke,adminProducts:je,adminUsers:Pe}}),Ee=r("5f5b"),Se=r("b1e0"),$e=(r("f9e3"),r("2dd8"),r("01ac"));x.a.defaults.baseURL="https://61b7575464e4a10017d18aa5.mockapi.io/easyfood/api",a["default"].use(Ee["a"]),a["default"].use(Se["a"]),a["default"].config.productionTip=!1,a["default"].use($e["a"]),Ce.beforeEach((function(t,e,r){("auth"===t.name||"home"===t.name||Te.state.auth.profile)&&("auth"!==t.name&&"login"!==t.path||!Te.state.auth.profile)?r():r("/")})),new a["default"]({render:function(t){return t(v)},router:Ce,store:Te}).$mount("#app")},"67a5":function(t,e,r){t.exports=r.p+"img/sushi.356a2c39.png"},"6be0":function(t,e,r){t.exports=r.p+"img/burger.b955a584.png"},"7b84":function(t,e,r){t.exports=r.p+"img/hotdog.a60f8b86.png"},"85ec":function(t,e,r){},a0da:function(t,e,r){t.exports=r.p+"img/mafalda.1b85a4ba.png"},b51a:function(t,e,r){t.exports=r.p+"img/premium-burger.46629740.png"},d4ff:function(t,e,r){t.exports=r.p+"img/all-dips.31deb07d.png"},e619:function(t,e,r){t.exports=r.p+"img/placeholder.ee107942.png"},f48a:function(t,e,r){t.exports=r.p+"img/pizza.3d376448.png"}});
//# sourceMappingURL=app.65e4248c.js.map